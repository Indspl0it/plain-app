import{u as Z,e as tt,c as et,_ as st,d as ot}from"./list-e7ef4cf1.js";import{_ as at}from"./FieldId-da304ce7.js";import{_ as nt}from"./Multiselect-90c04a89.js";import{_ as lt}from"./Breadcrumb-23f5606f.js";import{d as ct,n as ut,r as p,u as rt,A as it,m as dt,B as pt,D as _t,G as mt,H as ht,I as ft,U as vt,o as l,c as i,a as t,b,w as _,e as a,q as bt,J as $,M as B,j as n,N as gt,F as w,v as M,g as L,Q as yt,ax as kt,x as K,R as x,ai as $t,aj as wt,C as Vt,t as G,av as Ct,ay as St,K as Nt,L as It,s as Tt,P as F,l as Dt,_ as qt}from"./index-89decb33.js";import{b as At,a as Qt}from"./search-0684184d.js";import{n as Ut}from"./list-6498ebd9.js";import"./VModal.vuevuetypescriptsetuptruelang-6d140002.js";import"./vee-validate.esm-09f61400.js";import"./baseIndexOf-70b929c6.js";const Bt=m=>($t("data-v-a85a9f40"),m=m(),wt(),m),Mt={class:"v-toolbar"},Lt={class:"right-actions"},Kt=["onClick"],xt={class:"row mb-3"},Gt={class:"col-md-3 col-form-label"},Ft={class:"col-md-9"},Rt=["onKeyup"],jt={class:"row mb-3"},zt={class:"col-md-3 col-form-label"},Et={class:"col-md-9"},Ot={class:"actions"},Pt=["onClick"],Ht={class:"table"},Jt=Bt(()=>t("th",null,"ID",-1)),Wt=["onClick"],Xt=["onUpdate:modelValue"],Yt=["onClick"],Zt={class:"badge"},te={class:"nowrap"},ee={class:"nowrap"},se={key:0},oe={colspan:"6"},ae={class:"no-data-placeholder"},ne={name:"NotesTrash",inheritAttrs:!1,customOptions:{}},le=ct({...ne,setup(m){var Q,U;const V=ut(),c=p([]),{t:C}=rt(),u=it({text:"",tags:[]}),S="NOTE",N=dt().query,h=p(parseInt(((Q=N.page)==null?void 0:Q.toString())??"1")),f=50,v=p(0),r=p(pt(((U=N.q)==null?void 0:U.toString())??"")),I=p(""),{tags:R}=Z(S,r,u,async e=>{e.push({name:"trash",op:"",value:"true"}),I.value=At(e),await Vt(),z()}),{deleteItems:T}=tt(kt,()=>{y()},c),{selectAll:g,toggleSelect:D}=et(c),{loading:j,load:z,refetch:y}=_t({handle:(e,o)=>{o?G(C(o),"error"):e&&(c.value=e.notes.map(k=>({...k,checked:!1})),v.value=e.noteCount)},document:Ct,variables:()=>({offset:(h.value-1)*f,limit:f,query:I.value}),appApi:!0});mt(h,e=>{K(V,`/notes/trash?page=${e}&q=${x(r.value)}`)});function q(){r.value=Qt(u),A()}function A(){K(V,`/notes/trash?q=${x(r.value)}`)}ht(()=>{ft.on("refetch_by_tag_type",e=>{e===S&&y()})});const{mutate:E,onDone:O}=vt({document:St,appApi:!0});function P(){const e=c.value.filter(o=>o.checked);if(e.length===0){G(C("select_first"),"error");return}E({ids:e.map(o=>o.id)})}function H(e){Dt.push(`/notes/${e.id}`)}return O(()=>{y()}),(e,o)=>{const k=lt,J=nt,W=st,X=at,Y=ot;return l(),i(w,null,[t("div",Mt,[b(k,{current:()=>`${e.$t("page_title.trash")} (${v.value})`},null,8,["current"]),t("div",Lt,[t("button",{class:"btn btn-restore",type:"button",onClick:_(P,["prevent"])},a(e.$t("restore")),9,Kt),t("button",{class:"btn btn-delete",type:"button",onClick:o[0]||(o[0]=_((...s)=>n(T)&&n(T)(...s),["prevent"]))},a(e.$t("delete")),1),b(W,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=s=>r.value=s),search:A},{filters:bt(()=>[t("div",xt,[t("label",Gt,a(e.$t("keywords")),1),t("div",Ft,[$(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=s=>u.text=s),class:"form-control",onKeyup:It(q,["enter"])},null,40,Rt),[[Nt,u.text]])])]),t("div",jt,[t("label",zt,a(e.$t("tags")),1),t("div",Et,[b(J,{modelValue:u.tags,"onUpdate:modelValue":o[2]||(o[2]=s=>u.tags=s),label:"name","track-by":"id",options:n(R)},null,8,["modelValue","options"])])]),t("div",Ot,[t("button",{type:"button",class:"btn",onClick:_(q,["stop"])},a(e.$t("search")),9,Pt)])]),_:1},8,["modelValue"])])]),t("table",Ht,[t("thead",null,[t("tr",null,[t("th",null,[$(t("input",{class:"form-check-input",type:"checkbox",onChange:o[4]||(o[4]=(...s)=>n(D)&&n(D)(...s)),"onUpdate:modelValue":o[5]||(o[5]=s=>gt(g)?g.value=s:null)},null,544),[[B,n(g)]])]),Jt,t("th",null,a(e.$t("title")),1),t("th",null,a(e.$t("tags")),1),t("th",null,a(e.$t("updated_at")),1),t("th",null,a(e.$t("created_at")),1)])]),t("tbody",null,[(l(!0),i(w,null,M(c.value,s=>(l(),i("tr",{key:s.id,class:Tt({checked:s.checked}),onClick:_(d=>s.checked=!s.checked,["stop"])},[t("td",null,[$(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":d=>s.checked=d},null,8,Xt),[[B,s.checked]])]),t("td",null,[b(X,{id:s.id,raw:s},null,8,["id","raw"])]),t("td",null,[t("a",{href:"#",onClick:_(d=>H(s),["stop"])},a(s.title||e.$t("no_content")),9,Yt)]),t("td",null,[(l(!0),i(w,null,M(s.tags,d=>(l(),i("span",Zt,a(d.name),1))),256))]),t("td",te,a(n(F)(s.updatedAt)),1),t("td",ee,a(n(F)(s.createdAt)),1)],10,Wt))),128))]),c.value.length?L("",!0):(l(),i("tfoot",se,[t("tr",null,[t("td",oe,[t("div",ae,a(e.$t(n(Ut)(n(j)))),1)])])]))]),v.value>f?(l(),yt(Y,{key:0,modelValue:h.value,"onUpdate:modelValue":o[6]||(o[6]=s=>h.value=s),total:v.value,limit:f},null,8,["modelValue","total"])):L("",!0)],64)}}});const be=qt(le,[["__scopeId","data-v-a85a9f40"]]);export{be as default};
