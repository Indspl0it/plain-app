import{d as k,u as A,n as x,r as E,i as L,t as M,br as S,o as r,c as i,a as l,f as $,e as c,w as g,F as f,v as N,s as Q,j as q,X as u,U as _,bs as D,x as G,R as I,bt as V,bu as B}from"./index-89decb33.js";import{c as F}from"./index-0643e78e.js";import{k as b,b as O}from"./search-0684184d.js";import{_ as C}from"./EditValueModal.vuevuetypescriptsetuptruelang-00f692e5.js";import{_ as w}from"./DeleteConfirm.vuevuetypescriptsetuptruelang-5ca1a67e.js";const R={class:"nav-title mt-4"},U=["onClick"],j={class:"nav"},z=["onClick","onContextmenu"],K=k({__name:"TagFilter",props:{tagType:{type:String,required:!0},selected:{type:String,required:!0}},setup(s){const o=s,{t:a}=A(),v=x(),m=E([]),{refetch:p}=L({handle:(e,t)=>{t?M(a(t),"error"):e&&(m.value=e.tags)},document:S,variables:{type:o.tagType},appApi:!0});function y(){u(C,{title:a("add_tag"),placeholder:a("name"),mutation:()=>_({document:D,options:{update:()=>{p()}},appApi:!0}),getVariables:e=>({type:o.tagType,name:e})})}function T(e){const t=O([{name:"tag",op:"",value:b(e.name)}]);G(v,`/${{NOTE:"notes",AUDIO:"audios",IMAGE:"images",VIDEO:"videos",FEED_ENTRY:"feeds",SMS:"messages",CALL:"calls",CONTACT:"contacts",AI_CHAT:"aichats"}[o.tagType]}?q=${I(t)}`)}function h(e,t){e.preventDefault(),F({x:e.x,y:e.y,items:[{label:a("rename"),onClick:()=>{u(C,{title:a("rename"),placeholder:a("name"),value:t.name,mutation:()=>_({document:V,appApi:!0}),getVariables:n=>({id:t.id,name:n}),done:()=>{p()}})}},{label:a("delete"),onClick:()=>{u(w,{id:t.id,name:t.name,gql:B,appApi:!0,typeName:"Tag"})}}]})}return(e,t)=>(r(),i(f,null,[l("h2",R,[$(c(e.$t("tags"))+" ",1),l("button",{class:"btn btn-sm",type:"button",onClick:g(y,["prevent"])},c(e.$t("add")),9,U)]),l("ul",j,[(r(!0),i(f,null,N(m.value,n=>(r(),i("li",{onClick:g(d=>T(n),["prevent"]),onContextmenu:d=>h(d,n),class:Q({active:s.selected&&q(b)(n.name)===s.selected})},c(n.name),43,z))),256))])],64))}});export{K as _};
