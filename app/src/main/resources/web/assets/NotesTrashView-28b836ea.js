import{u as Z,e as tt,c as et,_ as ot,d as st}from"./list-b0e5ee2c.js";import{_ as at}from"./FieldId-a09be666.js";import{_ as nt}from"./Multiselect-072cb44d.js";import{_ as lt}from"./Breadcrumb-55791723.js";import{d as ct,p as ut,r as p,u as rt,A as it,n as dt,B as pt,D as _t,G as mt,H as ht,I as ft,U as vt,o as l,c as i,b as t,e as b,w as _,f as a,v as bt,J as $,M as B,g as n,N as gt,F as w,y as M,k as L,Q as yt,ax as kt,z as K,R as x,ai as $t,aj as wt,C as Vt,t as G,av as Ct,ay as St,K as Nt,L as It,x as Tt,P as z,m as Dt,_ as At}from"./index-3c761cf5.js";import{b as Qt,a as Ut}from"./search-2c6de17f.js";import{n as qt}from"./list-6498ebd9.js";import"./VModal.vuevuetypescriptsetuptruelang-d5392689.js";import"./vee-validate.esm-7f7a9a56.js";import"./baseIndexOf-70b929c6.js";const Bt=m=>($t("data-v-a85a9f40"),m=m(),wt(),m),Mt={class:"v-toolbar"},Lt={class:"right-actions"},Kt=["onClick"],xt={class:"row mb-3"},Gt={class:"col-md-3 col-form-label"},zt={class:"col-md-9"},Ft=["onKeyup"],Rt={class:"row mb-3"},Et={class:"col-md-3 col-form-label"},Ot={class:"col-md-9"},Pt={class:"actions"},jt=["onClick"],Ht={class:"table"},Jt=Bt(()=>t("th",null,"ID",-1)),Wt=["onClick"],Xt=["onUpdate:modelValue"],Yt=["onClick"],Zt={class:"badge"},te={class:"nowrap"},ee={class:"nowrap"},oe={key:0},se={colspan:"6"},ae={class:"no-data-placeholder"},ne={name:"NotesTrash",inheritAttrs:!1,customOptions:{}},le=ct({...ne,setup(m){var U,q;const V=ut(),c=p([]),{t:C}=rt(),u=it({text:"",tags:[]}),S="NOTE",N=dt().query,h=p(parseInt(((U=N.page)==null?void 0:U.toString())??"1")),f=50,v=p(0),r=p(pt(((q=N.q)==null?void 0:q.toString())??"")),I=p(""),{tags:F}=Z(S,r,u,async e=>{e.push({name:"trash",op:"",value:"true"}),I.value=Qt(e),await Vt(),E()}),{deleteItems:T}=tt(kt,()=>{y()},c),{selectAll:g,toggleSelect:D}=et(c),{loading:R,load:E,refetch:y}=_t({handle:(e,s)=>{s?G(C(s),"error"):e&&(c.value=e.notes.map(k=>({...k,checked:!1})),v.value=e.noteCount)},document:Ct,variables:()=>({offset:(h.value-1)*f,limit:f,query:I.value}),appApi:!0});mt(h,e=>{K(V,`/notes/trash?page=${e}&q=${x(r.value)}`)});function A(){r.value=Ut(u),Q()}function Q(){K(V,`/notes/trash?q=${x(r.value)}`)}ht(()=>{ft.on("refetch_by_tag_type",e=>{e===S&&y()})});const{mutate:O,onDone:P}=vt({document:St,appApi:!0});function j(){const e=c.value.filter(s=>s.checked);if(e.length===0){G(C("select_first"),"error");return}O({ids:e.map(s=>s.id)})}function H(e){Dt.push(`/notes/${e.id}`)}return P(()=>{y()}),(e,s)=>{const k=lt,J=nt,W=ot,X=at,Y=st;return l(),i(w,null,[t("div",Mt,[b(k,{current:()=>`${e.$t("page_title.trash")} (${v.value})`},null,8,["current"]),t("div",Lt,[t("button",{class:"btn btn-restore",type:"button",onClick:_(j,["prevent"])},a(e.$t("restore")),9,Kt),t("button",{class:"btn btn-delete",type:"button",onClick:s[0]||(s[0]=_((...o)=>n(T)&&n(T)(...o),["prevent"]))},a(e.$t("delete")),1),b(W,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=o=>r.value=o),search:Q},{filters:bt(()=>[t("div",xt,[t("label",Gt,a(e.$t("keywords")),1),t("div",zt,[$(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>u.text=o),class:"form-control",onKeyup:It(A,["enter"])},null,40,Ft),[[Nt,u.text]])])]),t("div",Rt,[t("label",Et,a(e.$t("tags")),1),t("div",Ot,[b(J,{modelValue:u.tags,"onUpdate:modelValue":s[2]||(s[2]=o=>u.tags=o),label:"name","track-by":"id",options:n(F)},null,8,["modelValue","options"])])]),t("div",Pt,[t("button",{type:"button",class:"btn",onClick:_(A,["stop"])},a(e.$t("search")),9,jt)])]),_:1},8,["modelValue"])])]),t("table",Ht,[t("thead",null,[t("tr",null,[t("th",null,[$(t("input",{class:"form-check-input",type:"checkbox",onChange:s[4]||(s[4]=(...o)=>n(D)&&n(D)(...o)),"onUpdate:modelValue":s[5]||(s[5]=o=>gt(g)?g.value=o:null)},null,544),[[B,n(g)]])]),Jt,t("th",null,a(e.$t("title")),1),t("th",null,a(e.$t("tags")),1),t("th",null,a(e.$t("updated_at")),1),t("th",null,a(e.$t("created_at")),1)])]),t("tbody",null,[(l(!0),i(w,null,M(c.value,o=>(l(),i("tr",{key:o.id,class:Tt({checked:o.checked}),onClick:_(d=>o.checked=!o.checked,["stop"])},[t("td",null,[$(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":d=>o.checked=d},null,8,Xt),[[B,o.checked]])]),t("td",null,[b(X,{id:o.id,raw:o},null,8,["id","raw"])]),t("td",null,[t("a",{href:"#",onClick:_(d=>H(o),["stop"])},a(o.title||e.$t("no_content")),9,Yt)]),t("td",null,[(l(!0),i(w,null,M(o.tags,d=>(l(),i("span",Zt,a(d.name),1))),256))]),t("td",te,a(n(z)(o.updatedAt)),1),t("td",ee,a(n(z)(o.createdAt)),1)],10,Wt))),128))]),c.value.length?L("",!0):(l(),i("tfoot",oe,[t("tr",null,[t("td",se,[t("div",ae,a(e.$t(n(qt)(n(R)))),1)])])]))]),v.value>f?(l(),yt(Y,{key:0,modelValue:h.value,"onUpdate:modelValue":s[6]||(s[6]=o=>h.value=o),total:v.value,limit:f},null,8,["modelValue","total"])):L("",!0)],64)}}});const be=At(le,[["__scopeId","data-v-a85a9f40"]]);export{be as default};
